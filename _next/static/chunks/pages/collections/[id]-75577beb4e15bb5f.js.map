{"version":3,"file":"static/chunks/pages/collections/[id]-75577beb4e15bb5f.js","mappings":"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","sources":["webpack://_N_E/?b930","webpack://_N_E/./components/pages/collection/filter_bar/icon_button.tsx","webpack://_N_E/./components/pages/collection/filter_bar/text_button.tsx","webpack://_N_E/./components/pages/collection/filter_bar.tsx","webpack://_N_E/./components/common/nicotine-warning.tsx","webpack://_N_E/./components/common/price-display-with-discount.tsx","webpack://_N_E/./components/pages/collection/grid/item.tsx","webpack://_N_E/./components/core/transitions/fade_in.tsx","webpack://_N_E/./components/pages/collection/grid/no-items.tsx","webpack://_N_E/./components/pages/collection/search-bar.tsx","webpack://_N_E/./pages/collections/[id].tsx","webpack://_N_E/./node_modules/@swc/helpers/src/_instanceof.mjs"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/collections/[id]\",\n      function () {\n        return require(\"private-next-pages/collections/[id].tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/collections/[id]\"])\n      });\n    }\n  ","import { prebuildData } from \"../../../../lib/prebuild-data\";\nimport { EventPane } from \"../../../core/event_pane\";\n\nexport type FilterBarIconButtonProps = {\n    name: string;\n    selected?: boolean;\n    onClick?: () => void;\n    paneClassNames?: string[];\n    hint?: string;\n};\n\nexport function FilterBarIconButton({name,selected,onClick = () => {},paneClassNames,hint}:FilterBarIconButtonProps)\n{\n    const { collectionFilterControls: { highlightColor,hoverColor,color } } = prebuildData.getActiveTheme();\n\n    return (\n        <>\n            <div className={\"wrapper\"+(selected?\" selected\":\"\")}>\n                <div className={\"container\"}>\n                    <div className=\"frame\">\n                        <i className={`icon-collection-filterbar-${name} icon`}  />\n                    </div>\n                    <div className=\"frame selected\">\n                        <i className={`icon-collection-filterbar-${name}-selected icon`}  />\n                    </div>\n                    <EventPane onClick={onClick} paneClassNames={paneClassNames} hint={hint} />\n                </div>\n            </div>\n            <style jsx>{`\n            .container {\n                --height: 68rem;\n                position: relative;\n                width: 100%;\n                height: var(--height);\n            }\n\n            .frame {\n                position: absolute;\n                left: 0rem;\n                top: 0rem;\n                width: 100%;\n                height: 100%;                \n                text-align: center;\n                visibility: hidden;\n                opacity: 0;\n                --duration: calc(var(--action-switch-transition-duration) * 0.7);\n                --delay: var(--duration);                \n                transition: visibility var(--duration) ease var(--delay), opacity var(--duration) ease var(--delay);\n                z-index: -2;\n            }\n\n            .wrapper:not(.selected) .frame:not(.selected),.wrapper.selected .frame.selected {\n                visibility: visible;\n                opacity: 1;\n                transition: visibility var(--duration), opacity var(--duration);\n                z-index: -1;\n            }\n            \n            .icon {\n                font-size: 32rem;\n                line-height: var(--height);\n                color: ${color};\n            }\n\n            .frame.selected .icon {\n                color: ${highlightColor};\n            }\n\n            .container.hover .frame:not(.selected) .icon {\n                color: ${hoverColor};\n            } \n\n            .container.touchdown {\n                background-color: rgba(0,0,0,0.03);\n            }\n\n            @media screen and (max-width: 1300px) and (max-height: 775px) {\n                .container {\n                    --height: 60rem;\n                }\n\n                .icon {\n                    font-size: 30rem;\n                }\n            }      \n\n            `}</style>\n        </>\n    );\n}","import React from \"react\";\nimport { prebuildData } from \"../../../../lib/prebuild-data\";\nimport { EventPane } from \"../../../core/event_pane\";\n\nexport type FilterBarTextButtonProps = {\n    text: string;\n    selected?: boolean;\n    onClick?: () => void;\n    paneClassNames?: string[];\n    disabled?: boolean;\n};\n\nexport function FilterBarTextButton({text,selected = false,onClick = () => {},paneClassNames,disabled = false}:FilterBarTextButtonProps)\n{\n    const { collectionFilterControls: { backgroundColor,color,highlightColor,hoverColor } } = prebuildData.getActiveTheme();\n\n    return (\n        <>\n            <div className={\"container\"+(selected?\" selected\":\"\")+(disabled?\" disabled\":\"\")}>\n                {text.split(\"\\n\").map((line,index) => (<React.Fragment key={index}>{line}<br/></React.Fragment>))}\n                {!disabled?<EventPane onClick={onClick} paneClassNames={paneClassNames} />:null}                \n            </div>\n            <style jsx>{`\n            .container {\n                position: relative;\n                text-align: center;\n                color: ${color};\n                font-weight: 700;\n                font-size: 15.5rem;\n                letter-spacing: 0.5rem;\n                padding: 19rem 0rem;\n                --duration: var(--action-switch-transition-duration);\n                transition: color var(--duration);\n            }\n\n            .container.disabled {\n                color: #aaa;\n            }\n\n            .container.selected {\n                color: ${highlightColor};\n            }\n\n            .container.hover:not(.selected) {\n                color: ${hoverColor};\n            }\n\n            .container.touchdown {\n                background-color: rgba(0,0,0,0.03);\n            }\n\n            @media screen and (max-width: 1300px) and (max-height: 775px) {\n                .container {\n                    padding: 15rem 0rem;\n                    font-size: 15rem;\n                }\n            }      \n            `}</style>\n        </>\n    );\n}   ","import { useContext, useEffect, useRef, useState } from \"react\";\nimport { CollectionFilterStateContext, FilterMap, SortOrder } from \"../../../contexts/collection_filter_state\";\nimport { DimensionsStateContext } from \"../../../contexts/dimensions_state\";\nimport { LayoutStateContext } from \"../../../contexts/layout_state\";\nimport { WindowSizeContext } from \"../../../contexts/window_size\";\nimport { useResizeObserver } from \"../../../hooks/use_resize_observer\";\nimport { useSmartState } from \"../../../hooks/use_smart_state\";\nimport { misc } from \"../../../lib/misc\";\nimport { prebuildData } from \"../../../lib/prebuild-data\";\nimport { FilterBarIconButton } from \"./filter_bar/icon_button\";\nimport { FilterBarTextButton } from \"./filter_bar/text_button\";\n\nexport type FilterBarProps = {\n    width: number;\n    open: boolean;\n    bannerHeightReady: boolean;\n    cancelControlsPointerEvents: boolean;\n    showInline: boolean;\n};\n\nexport function FilterBar({width,open,bannerHeightReady,cancelControlsPointerEvents,showInline}: FilterBarProps)\n{\n    open = true;\n\n    const sortOrderCaptions = {\n        \"popular\": \"MOST \\nPOPULAR\",\n        \"reviewed\": \"BEST \\nREVIEWED\",\n        \"newest\": \"NEWEST\",\n        // \"favorites\": \"MY \\nFAVORITES\",\n    };\n    // const filters = [\"apple\",\"cake\",\"candy\",\"ice\",\"more\"];\n    const filters = [\n        {id: \"fruit\",hint: \"Fruit\"},\n        {id: \"dessert\",hint: \"Dessert\"},\n        {id: \"candy\",hint: \"Candy\"},\n        {id: \"cool\",hint: \"Menthol / Agent Cool Recommended\"},\n        {id: \"other\",hint: \"Others\"}\n    ];\n\n    const { sortOrder, filter, isSwitching } = useContext(CollectionFilterStateContext);\n\n    const [filterValue,setFilterValue] = useState<FilterMap>({});\n    const filterValueRef = useRef(filterValue);\n    filterValueRef.current = filterValue;\n\n    const [sortOrderValue,setSortOrderValue] = useState<SortOrder>(\"popular\");\n    const sendFilterTimeoutRef = useRef(0);\n    const sendSortOrderTimeoutRef = useRef(0);\n\n    useEffect(() => \n    {\n        if (sendFilterTimeoutRef.current!==0) clearTimeout(sendFilterTimeoutRef.current);\n        sendFilterTimeoutRef.current = setTimeout(() => \n        {\n            sendFilterTimeoutRef.current = 0;            \n            filter.set(filterValue);\n        },50) as unknown as number;\n        \n    },[filterValue]);\n\n    useEffect(() => \n    {\n        const { current: filterValue } = filterValueRef;\n        if ((Object.keys(filter.value).length===0) && (Object.keys(filterValue).length>0))\n        {\n            setFilterValue({});\n        }\n    },[filter.value]);\n    \n    useEffect(() => \n    {\n        if (sendSortOrderTimeoutRef.current!==0) clearTimeout(sendSortOrderTimeoutRef.current);\n        sendSortOrderTimeoutRef.current = setTimeout(() => \n        {\n            sendSortOrderTimeoutRef.current = 0;            \n            sortOrder.set(sortOrderValue);\n        },50) as unknown as number;\n        \n    },[sortOrderValue]);\n\n    const selectedFilterIdRef = useRef(filterValue);\n    selectedFilterIdRef.current = filterValue;\n    const [controlsTop,setControlsTop] = useState(0);\n    const [_showControls,setShowControls] = useState(false);\n\n    const showControls = _showControls && bannerHeightReady;\n\n    const { page,misc: { filterBarItemClassNameIdentifier },mobileDetect: { isActive: isMobile,widthCutoff: mobileCutoff } } = useContext(LayoutStateContext);\n    const _windowSize = useContext(WindowSizeContext);\n    const permRef = useRef({windowSize: _windowSize});\n    permRef.current.windowSize = _windowSize;    \n\n    const { \n        navbarHeight,\n        bannerHeight,\n        miniNavbarHeight,\n        collectionGridHeight,\n        filterBarControlsHeight,\n        scrollBottomPadding\n    } = useContext(DimensionsStateContext);\n\n    const updateTop = () => \n    {\n        const { windowSize } = permRef.current;\n        const controlsHeight = filterBarControlsHeight.value;\n        const scrollTop = page.scrollTop();\n        const { height: windowHeight } = windowSize;\n        const topSectionHeight = navbarHeight.value+bannerHeight.value;\n        const maxAvailableSpace = windowHeight-miniNavbarHeight.value;\n        const availableSpace = Math.min(windowHeight-topSectionHeight+scrollTop,maxAvailableSpace);\n        scrollBottomPadding.set(Math.max(controlsHeight-collectionGridHeight.value,0));        \n\n        if ((controlsHeight+10)<=availableSpace) {\n            const stickyPosition = ((maxAvailableSpace-controlsHeight)/2)+miniNavbarHeight.value;\n            setControlsTop(stickyPosition);\n        }\n        else {\n            setControlsTop(miniNavbarHeight.value);\n        }\n        \n        setShowControls(true);\n    };\n\n    const hideControls = useSmartState(false);\n\n    useEffect(() => \n    {\n        return page.addScrollEventListener(({}) => updateTop());\n    },[]);\n\n    useEffect(() => \n    {\n        updateTop();\n    },[_windowSize,navbarHeight.value,bannerHeight.value,miniNavbarHeight.value,collectionGridHeight.value,filterBarControlsHeight.value]);\n\n    const paneClassNames = [filterBarItemClassNameIdentifier];\n\n    const handlerFilterIconClicked = (id: string) =>\n    {\n        const updatedSelectedFilterId = {...selectedFilterIdRef.current};\n        if (selectedFilterIdRef.current[id])\n        {\n            delete updatedSelectedFilterId[id];\n        }\n        else\n        {\n            updatedSelectedFilterId[id] = true;\n        }\n        setFilterValue(updatedSelectedFilterId);\n    };\n\n    const refOnResize = useResizeObserver(({height}) =>\n    {\n        filterBarControlsHeight.set(height);\n    });\n\n    useEffect(() => {\n        if (isSwitching.value || page.isScrollLocked) {\n            // const offsetTop = misc.getOffsetRelativeToParent(refOnResize.current,\".filter-bar-back\").top;\n            // setFixedTop(controlsTop);\n        }\n        else {\n            hideControls.value = false;\n        }\n    },[isSwitching.value || page.isScrollLocked]);\n\n    const isBlocked = isSwitching.value || page.isScrollLocked;\n\n    const { collectionFilterControls: { backgroundColor,color } } = prebuildData.getActiveTheme();\n\n    return (\n        <>\n            <div className={\"container slider\"+(open?\" open\":\"\")} style={{width: `${width}rem`,transform: `translateX(${open?0:-width}rem)`}}>\n            </div>\n            <div ref={refOnResize} className={\"controls slider\"+(open?\" open\":\"\")+(showInline?\" show-inline\":\"\")+\" \"+paneClassNames.join(\" \")+(hideControls.value?\" hide-controls\":\"\")} style={{\n                    width: `${width}rem`,\n                    transform: `translateX(${open?0:-width}rem)`,\n                    ...(isMobile.current?{}:{\n                        top: (controlsTop+(showControls?0:-100000)),\n                    }),                    \n                    pointerEvents: cancelControlsPointerEvents?\"none\":\"all\",\n                }}>\n                <div className=\"top-spacer\"></div>\n                {Object.keys(sortOrderCaptions).map((id: SortOrder) => <FilterBarTextButton key={id} disabled={id===\"favorites\"} paneClassNames={paneClassNames} text={sortOrderCaptions[id]} selected={sortOrderValue===id} onClick={() => setSortOrderValue(id)} /> )}\n                <div className={[\"separator\",paneClassNames].join(\" \")}>\n                    FLAVOR<br/>FILTER\n                </div>\n                {filters.map(({id,hint}) => <FilterBarIconButton key={id} paneClassNames={paneClassNames} name={id} selected={filterValue[id]?true:false} onClick={() => handlerFilterIconClicked(id)} hint={hint} />)}\n                <div className=\"bottom-spacer\"></div>\n            </div>\n            <style jsx>{`\n\n            .slider.open {\n                /* transition: transform 0.5s; */\n            }\n\n            .container {\n                position: fixed;\n                left: 0rem;\n                top: 0rem;\n                height: 100%;\n                background-color: ${backgroundColor};\n                z-index: -1;                \n                display: none;\n            }\n\n            .bottom-spacer {\n                height: 12rem;\n            }\n\n            .top-spacer {\n                height: 7rem;\n            }\n\n            .controls {\n                position: sticky;\n                left: 0rem;\n                z-index: 1;\n                --action-switch-transition-duration: 0.2s;\n                transition: opacity 0.5s;\n            }\n\n            .controls.show-inline {\n                /* position: static; */\n            }\n\n            .controls.hide-controls {\n                opacity: 0;\n                transition-duration: 0s;\n            }\n\n\n            .separator {\n                text-align: center;\n                font-size: 15.5rem;\n                letter-spacing: 0.5rem;\n                color: ${color};\n                font-weight: 700;\n                border-top: 1rem solid ${color};\n                border-bottom: 1rem solid ${color};\n                margin: 10rem 18rem;\n                padding: 12rem 0rem;\n            }\n\n            @media screen and (max-width: 1300px) and (max-height: 775px) {\n                .separator {\n                    font-size: 15rem;\n                }\n            }      \n            @media screen and (max-width: ${mobileCutoff}px) {\n                .controls {\n                    position: static;\n                }\n            }\n            `}</style>\n        </>\n    );\n}","import { useCssStateManager } from \"../../hooks/use_css_state_manager\";\nimport { prebuildData } from \"../../lib/prebuild-data\";\n\nexport type NicotineWarningProps = {\n};\n\nexport default function NicotineWarning({}:NicotineWarningProps)\n{\n    const cssStateManager = useCssStateManager([\"nicotine-warning\"]);\n\n    const { nicotineWarningBox: { backgroundColor,borderColor,textColor } } = prebuildData.getActiveTheme();\n\n    return (\n        <>\n            <div className={cssStateManager.getClassNames()}>\n                <div className=\"outline\">\n                    <div className=\"warning\">WARNING</div>\n                    <div className=\"text-line\">This product contains nicotine. Nicotine is an addictive chemical</div>\n                </div>\n            </div>\n            <style jsx>{`\n            .nicotine-warning {       \n                background-color: ${backgroundColor};                                         \n                color: ${textColor};\n                text-align: center;\n                margin-top: 20rem;            \n                padding: 0rem 0rem;\n            }\n            .outline {                \n                border: 3rem solid ${borderColor};\n                padding: 10rem;\n            }\n            .warning {\n                font-size: 15rem;\n                font-weight: 600;\n                padding-bottom: 2rem;            \n            }\n            .text-line {\n                font-size: 12rem;\n            }\n            `}</style>\n        </>\n    );\n}","import { useCssStateManager } from \"../../hooks/use_css_state_manager\";\nimport PriceDisplay from \"./price-display\";\n\nexport type PriceDisplayWithDiscountProps = {\n    size?: number;\n    price: number;\n    discountedPrice: number;\n};\n\nexport default function PriceDisplayWithDiscount({\n    size,\n    price,\n    discountedPrice\n}:PriceDisplayWithDiscountProps)\n{\n    const cssStateManager = useCssStateManager([\"price-display-with-discount\"]);\n    return (\n        <>\n            <div className={cssStateManager.getClassNames()}>\n                {(price!==discountedPrice)?<>\n                    <span className=\"left-price\">\n                        <PriceDisplay price={price} size={size} strike />\n                    </span>\n                    <PriceDisplay price={discountedPrice} size={size} />\n                </>:<PriceDisplay price={price} size={size} />}                                \n            </div>\n            <style jsx>{`\n            .price-display-with-discount {\n            }\n\n            .left-price {\n                padding-right: 8rem;\n            }\n            `}</style>\n        </>\n    );\n}\n","import { useContext, useState } from \"react\";\nimport { LayoutStateContext } from \"../../../../contexts/layout_state\";\nimport { useCachedValue } from \"../../../../hooks/use_cached_value\";\nimport { useCustomRouter } from \"../../../../hooks/use_custom_router\";\nimport { consumeReviewsHeader } from \"../../../../hooks/use_reviews_header\";\nimport { prebuildData } from \"../../../../lib/prebuild-data\";\nimport NicotineWarning from \"../../../common/nicotine-warning\";\nimport PriceDisplay from \"../../../common/price-display\";\nimport PriceDisplayWithDiscount from \"../../../common/price-display-with-discount\";\nimport { Image } from \"../../../common/scaled-next-image\";\nimport { EventPane } from \"../../../core/event_pane\";\nimport { useCssStateManager } from \"../../../../hooks/use_css_state_manager\";\n\nexport type CollectionsGridItemProps = {\n    caption: string;\n    price: number;\n    discountedPrice: number;\n    imageSrc: string;\n    hoverImageSrc?: string;\n    productId: string;\n    teaseCaption?: string;\n};\n\nexport function CollectionsGridItem({caption,price,discountedPrice,imageSrc,hoverImageSrc,productId,teaseCaption}:CollectionsGridItemProps)\n{\n    const cssStateManager = useCssStateManager([\"collection-grid-item\"]);\n    cssStateManager.useProperty(!!teaseCaption,\"has-tease\");\n    const layout = useContext(LayoutStateContext);\n    const router = useCustomRouter();\n    let { reviewsCount,starRating } = consumeReviewsHeader(productId,layout);\n    const { mobileDetect: { widthCutoff: mobileCutoff } } = layout;\n\n    // const reviewText = (reviewsCount!==-1)?((reviewsCount>0)?`${reviewsCount} customer review${(reviewsCount>1)?\"s\":\"\"}`:\"No customer reviews yet\"):\"---\";\n    const reviewText = (reviewsCount>0)?`(${reviewsCount})`:\"No customer reviews\";\n    starRating = Math.min(Math.max(Math.round(starRating*2)/2,0),5);\n\n    const stars = Array.from(Array(5)).map(() => {\n        if (starRating>=1)\n        {\n            starRating--;\n            return \"star\";\n        }\n        else if (starRating===0.5)\n        {\n            starRating = 0;\n            return \"star-half\";\n        }\n        else\n        {\n            return \"star-empty\";\n        }\n    });\n\n    const { priceDollars,priceCents } = (() => \n    {\n        const priceStr = \"00\"+price;\n        const cutOffIndex = priceStr.length-2;\n        return { priceDollars: parseInt(priceStr.substring(0,cutOffIndex)).toString(),priceCents: priceStr.substring(cutOffIndex) };\n    })();\n\n    const [showImage,setShowImage] = useState(false);\n\n    const productPageRoute = useCachedValue(() => prebuildData.getProductPageRoute(productId),productId);\n\n    const clickHandler = () => {\n        router.push(productPageRoute);\n    };\n\n    const { collectionItem: { priceColor,titleColor,priceHoverColor,titleHoverColor,reviewCountColor,reviewCountHoverColor }, general: { starsColor,starsHoverColor } } = prebuildData.getActiveTheme();\n\n    return (\n        <>\n            <div className={cssStateManager.getClassNames()}>\n                <div className={\"image-square\"+(showImage?\" show\":\"\")}>\n                    <div className=\"inner\">\n                        <div className=\"inner-relative\">\n                            <Image src={imageSrc} layout=\"fill\" onLoadingComplete={() => {\n                                setShowImage(true);\n                            }} />\n                        </div>\n                    </div>\n                    {hoverImageSrc?(\n                        <div className=\"overlay\">\n                            <div className=\"inner\">\n                                <Image src={hoverImageSrc} layout=\"fill\" />\n                            </div>\n                        </div>\n                    ):null}\n                </div>\n                <div className={\"reviews\"+((reviewsCount>0)?\"\":\" none\")}>\n                    <span className=\"back\">\n                        <span className=\"stars\">\n                            {stars.map((type,index) => <i key={index} className={`icon-collection-item-review-${type}`} />)}\n                        </span>\n                        &nbsp;\n                        <span className=\"reviews-text\">{reviewText}</span>\n                    </span>\n                </div>                \n                <div className=\"product-name\">{caption}</div>\n                <div className=\"tease-caption\">{teaseCaption || \"\"}</div>\n                <div className=\"price\">                    \n                    <PriceDisplayWithDiscount price={price} discountedPrice={discountedPrice} size={21} />\n                </div>\n                <div className=\"expand\"></div>\n                <NicotineWarning />\n                <div className=\"bottom-margin\"></div>\n                <div className=\"mobile-overlay fill-parent\"></div>\n                <EventPane onClick={clickHandler} seoLinkUrl={productPageRoute} />\n            </div>\n            <style jsx>{`\n            .collection-grid-item {\n                width: 100%;\n                position: relative;\n                height: 100%;\n                display: flex;\n                flex-direction: column;\n            }\n\n            .expand {\n                flex: 1 1 auto;\n            }\n\n            .image-square {\n                width: 100%;\n                padding: 50%;\n                box-sizing: border-box;\n                position: relative;\n                --duration: 0.7s;\n                visibility: hidden;\n                opacity: 0;\n            }\n\n            .image-square.show {\n                transition: visibility var(--duration),opacity var(--duration);\n                visibility: visible;\n                opacity: 1;\n            }\n\n            .image-square .inner {\n                position: absolute;\n                left: 0rem;\n                top: 0rem;\n                width: 100%;\n                height: 100%;\n            }\n\n            .image-square .inner-relative {\n                position: relative;\n                width: 100%;\n                height: 100%;\n            }\n\n            .overlay {\n                position: absolute;\n                left: 0rem;\n                top: 0rem;\n                width: 100%;\n                height: 100%;\n                opacity: 0;\n            }\n\n            .overlay .inner {\n                position: relative;\n                width: 100%;\n                height: 100%;\n            }\n\n            .product-name,.price,.tease-caption {\n                text-align: center;\n                font-weight: 600;\n                font-size: 20rem;\n                margin-top: 8rem;                \n                width: 100%;\n                transition: color 0.2s;\n            }\n\n            .product-name {\n                color: ${titleColor};\n            }\n\n            .price {\n                color: ${priceColor};\n            }\n\n            .collection-grid-item.hover .product-name {\n                color: ${titleHoverColor};\n            }\n\n            .collection-grid-item.hover .price {\n                color: ${priceHoverColor};\n            }\n\n            .has-tease .price {\n                display: none;\n            }\n\n            .tease-caption {\n                display: none;\n            }\n\n            .has-tease .tease-caption {\n                display: block;\n                margin-top: 20rem;                \n                font-weight: 400;\n                font-size: 18rem;\n            }\n\n            .reviews {\n                text-align: center;\n                margin-top: 8rem;\n            }\n\n            .reviews .back {\n                background-color: #FFF;\n                padding: 4rem 10rem;\n                padding-right: 13rem;\n            }\n\n            .stars {\n                color: ${starsColor};\n                letter-spacing: 3rem;\n                font-size: 18rem;\n                transition: color 0.2s;\n            }\n\n            .collection-grid-item.hover .stars {\n                color: ${starsHoverColor};\n            }            \n\n            .reviews.none .stars {\n                display: none;\n            }\n\n            .reviews-text {\n                color: ${reviewCountColor};\n                transition: color 0.2s;\n            }\n\n            .collection-grid-item.hover .reviews-text {\n                color: ${reviewCountHoverColor};\n            }            \n\n            .reviews.none .reviews-text {\n                color: ${titleColor};\n            }\n\n            .bottom-margin {\n                height: 25rem;\n                font-size: 13rem;\n            }\n\n            .collection-grid-item.hover .overlay {\n                opacity: 1;\n                transition: opacity 0.3s ease-in-out;\n            }\n\n            .sup,.sup-dollar {\n                position: relative; top: -0.31em; left: 0.09em; font-size: 70%;\n            }\n\n            .sup-dollar {\n                left: 0rem;\n            }\n\n            .between-stars-review-break {\n                /* display: none; */\n                display: inline;                \n            }\n\n            .mobile-overlay {\n                position: absolute;\n                background-color: rgba(0,0,0,0.045);\n                opacity: 0;\n                transition: opacity var(--duration);\n            }\n\n            @media screen and (max-width: ${mobileCutoff}px) {\n                /*\n                .collection-grid-item.touchdown .mobile-overlay {\n                    opacity: 1;\n                }\n                */\n            }\n\n            `}</style>\n        </>\n    );\n}","import { FC, PropsWithChildren, useEffect, useState } from \"react\";\n\nexport type TransitionFadeInProps = {\n    durationSecs?: number;\n};\n\nexport const TransitionFadeIn: FC<PropsWithChildren<TransitionFadeInProps>> = ({\n    durationSecs = 0.6,\n    children\n}) =>\n{    \n    const [show,setShow] = useState(false)\n    useEffect(() => \n    {\n        setShow(true);\n    },[]);\n\n    return (\n        <>\n            <div className={\"container\"+(show?\" show\":\"\")} style={{\n                transition: `visibility ${durationSecs}s,opacity ${durationSecs}s`\n            }}>{children}</div>\n            <style jsx>{`\n            .container {\n                visibility: hidden;\n                opacity: 0;\n            }\n\n            .container.show {\n                visibility: visible;\n                opacity: 1;\n            }\n            `}</style>\n        </>\n    );\n}","import { useState } from \"react\";\nimport { TransitionFadeIn } from \"../../../core/transitions/fade_in\";\n\nexport type CollectionsGridNoItemsProps = {\n    caption?: string;\n};\n\nexport function CollectionsGridNoItems({caption = \"No products found matching this filter.\"}:CollectionsGridNoItemsProps)\n{    \n    return (\n        <>\n            <TransitionFadeIn>\n                <div className=\"container\">\n                    <div className=\"icon\">\n                        <i className=\"icon-collection-empty\" />\n                    </div>\n                    <div className=\"text\">\n                        {caption}\n                    </div>\n                </div>\n            </TransitionFadeIn>\n            <style jsx>{`\n            .container {\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                color: #424242;\n            }\n\n            .icon {\n                font-size: 150rem;\n                margin-top: 30rem;\n                margin-bottom: 15rem;\n                color: #787878;\n            }\n\n            .text {\n                font-size: 18rem;\n                text-align: center;\n            }\n           `}</style>\n        </>\n    );\n}","import { useContext, useEffect, useRef } from \"react\";\nimport { LayoutStateContext } from \"../../../contexts/layout_state\";\nimport { useCssStateManager } from \"../../../hooks/use_css_state_manager\";\nimport { EventPane } from \"../../core/event_pane\";\n\nexport type CollectionSearchBarProps = {\n    collectionId: string;\n    collectionCaption: string;\n};\n\nexport default function CollectionSearchBar({collectionId,collectionCaption}:CollectionSearchBarProps) {\n    const { searchOpen,openSearch,searchBarCommRef,mobileDetect: { widthCutoff: mobileCutoff,miniWidthCutoff },collectionSearchBarOpen } = useContext(LayoutStateContext);\n\n    const cssStateManager = useCssStateManager([\"collection-search-bar\"]);\n    cssStateManager.useProperty(collectionSearchBarOpen.value,\"open\");\n    cssStateManager.useProperty(searchOpen.value,\"broader-search-open\");    \n    \n    const { current: searchBarComm } = searchBarCommRef;\n\n    const clickHandler = () => {\n        if (!collectionSearchBarOpen.value) {\n            collectionSearchBarOpen.value = true;\n            openSearch(\"collection\",collectionId);\n        }\n    };\n\n    const placeholderRef = useRef<HTMLDivElement>();\n\n    const placeholderTransitionEndHandler = (elem: HTMLDivElement,propertyName: string) => {\n        if ((elem===placeholderRef.current) && (propertyName===\"width\") && (collectionSearchBarOpen.value)) {\n            searchBarComm.notifyMeOnPlaceholderAnimationEnd();\n        }\n    };\n\n    useEffect(() => {\n        if ((!searchOpen.value) && (collectionSearchBarOpen.value)) {\n            collectionSearchBarOpen.value = false;\n        }\n    },[searchOpen.value]);\n\n    return (\n        <>\n            <div className={cssStateManager.getClassNames()}>\n                <div ref={placeholderRef} className=\"placeholder\" onTransitionEnd={(e) => placeholderTransitionEndHandler(e.target as HTMLDivElement,e.propertyName)}>\n                    <div className=\"search-icon\"><i className=\"icon-navbar-search\" /></div>\n                    <div className=\"placeholder-text\">Search in {collectionCaption}</div>\n                    <EventPane onClick={clickHandler} />\n                </div>\n            </div>\n            <style jsx>{`\n            .collection-search-bar {\n                --duration: var(--search-open-duration);\n                position: relative;\n                z-index: 97;\n            }\n\n            .placeholder {\n                width: 280rem;\n                height: 40rem;\n                border: 1rem solid #aaa;\n                border-radius: 6rem;\n                position: absolute;\n                top: 0rem;\n                right: 0rem;\n                transition: width var(--duration);\n                background-color: var(--body-background-color);\n                overflow: hidden;\n            }\n\n            .open .placeholder {\n                width: 520rem;\n            }\n\n            .search-icon {\n                top: 6rem;\n                color: #ccc;\n                font-size: 21rem;\n                position: absolute;\n                left: 10rem;\n            }\n\n            .placeholder-text {\n                color: #aaa;\n                position: absolute;\n                left: 40rem;\n                top: 9rem;\n                font-size: 15rem;            \n                opacity: 1;\n                visibility: visible;\n                transition: opacity var(--duration),visibility var(--duration);\n                width: 300rem;\n            }\n\n            .placeholder-text {\n                white-space: no-wrap;\n            }\n\n            .open .placeholder-text {\n                opacity: 0;\n                visibility: hidden;\n            }\n\n            @media screen and (max-width: ${mobileCutoff}px) {\n                .placeholder {\n                    width: 0rem;                    \n                    border: none;\n                }               \n\n                .open .placeholder {\n                    border: 1rem solid #ddd;\n                    width: 100%;\n                }\n\n                /*\n                .placeholder-text {\n                    display: none;\n                }\n                */\n\n                .open .placeholder-text {\n                    opacity: 1;\n                    visibility: visible;\n                }\n            }\n\n            @media screen and (max-width: ${miniWidthCutoff}px) {\n                .placeholder-text {\n                    font-size: 14rem;\n                    top: 10rem;\n                }\n            }\n\n            \n\n            `}</style>\n        </>\n    );\n}","import Head from \"next/head\";\nimport { useRouter } from \"next/router\";\nimport { useContext, useEffect, useLayoutEffect, useRef, useState } from \"react\";\nimport Banner, { TBannerLayout } from \"../../components/banner\";\nimport { Grid } from \"../../components/core/grid\";\nimport { FilterBar } from \"../../components/pages/collection/filter_bar\";\nimport { LayoutStateContext } from \"../../contexts/layout_state\";\nimport { WindowSizeContext } from \"../../contexts/window_size\";\nimport { CollectionsGridItem } from \"../../components/pages/collection/grid/item\";\nimport { prebuildData } from \"../../lib/prebuild-data\";\nimport { useResizeObserver } from \"../../hooks/use_resize_observer\";\nimport { DimensionsStateContext } from \"../../contexts/dimensions_state\";\nimport { CollectionFilterStateContext } from \"../../contexts/collection_filter_state\";\nimport { CollectionsGridNoItems } from \"../../components/pages/collection/grid/no-items\";\nimport { Icon } from \"../../components/core/icon\";\nimport { EventPane } from \"../../components/core/event_pane\";\nimport { routerTransition } from \"../../components/core/router_transition\";\nimport { useDesktopScrollbar } from \"../../hooks/use_desktop_scrollbar\";\nimport CollectionNavBar from \"../../components/pages/collection/collection-nav-bar\";\nimport { libSearch } from \"../../lib/search\";\nimport CollectionSearchBar from \"../../components/pages/collection/search-bar\";\nimport { useCustomRouter } from \"../../hooks/use_custom_router\";\nimport { getInjectableHeaderTags } from \"../../components/layout\";\nimport { useCachedValue } from \"../../hooks/use_cached_value\";\nimport { ReviewsHeaderRaw, consumeAllReviewsHeader } from \"../../hooks/use_reviews_header\";\nimport CenteredSpinner from \"../../components/common/centered-spinner\";\nimport { misc } from \"../../lib/misc\";\nimport { BoughtTogetherClient } from \"../../hooks/use_bought_together_client\";\nimport { ProductMockReviewCollection } from \"../../lib/mock-reviews\";\n\nexport async function getStaticPaths() {\n    prebuildData.loadSnapshot();\n\n    return {\n        paths: Object.keys(prebuildData.getCollectionTable()).filter((handle) => handle!==\"help\").map((id) => ({ params: { id } })),\n        fallback: false\n    };\n}\n  \nexport async function getStaticProps(context) {\n    return {\n        props: {},\n    };\n}\n\nexport default function Collection() {    \n    const reactRouter = useRouter();\n    let { id } = reactRouter.query as {[key: string]: string};\n    id = id.split(\"?\")[0];\n\n    const { page,mobileDetect: { isActive: isMobile } } = useContext(LayoutStateContext);\n\n    const lastIsMobileRef = useRef(isMobile.current);\n\n    useEffect(() => {\n        if (isMobile.current!==lastIsMobileRef.current) {\n            lastIsMobileRef.current = isMobile.current;\n            page.scrollTo({top: 0,behavior: \"smooth\"});\n        }\n    },[isMobile.current]);\n\n    return <CollectionContent key={isMobile.current?1:0} id={id} />;\n}\n\ntype CollectionContentProps = {\n    id: string;\n};\n\nfunction CollectionContent({id}: CollectionContentProps) {\n    const filterBarWidth = 138;\n\n    const [filterBarOpen,setFilterBarOpen] = useState(false);\n    const [bannerHeightReady,setBannerHeightReady] = useState(false);\n    \n    \n    const { screenRatio,page,misc: { filterBarItemClassNameIdentifier },configuredBannerHeight,mobileDetect: { widthCutoff: mobileCutoff,isActive: isMobile },collectionSearchBarOpen,openSearch,scaleRemToPixel } = useContext(LayoutStateContext);        \n    const router = useCustomRouter();\n\n    const windowSize = useContext(WindowSizeContext);\n    const { miniNavbarHeight,filterBarControlsHeight,navbarHeight,bannerHeight,collectionGridHeight,scrollBottomPadding } = useContext(DimensionsStateContext);\n    const gridFrameRef = useRef<HTMLDivElement>(null);\n    const gridVerticalCellSpacing = 20;\n    const gridHorizontalCellSpacing: number | { fraction: number } = {fraction: 0.18};\n    const targetCellWidth = 350;\n    const [gridColumns,setGridColumns] = useState(4);\n    const permGridColumns = useRef(gridColumns);\n    permGridColumns.current = gridColumns;\n    const [gridProcessCounter,setGridProcessCounter] = useState(0);\n    const permGridProcessCounter = useRef(gridProcessCounter);\n    permGridProcessCounter.current = gridProcessCounter;\n\n    const filterBarBackRef = useRef<HTMLDivElement>();\n\n    const { isSwitching,sortOrder,refreshSwitch,filter } = useContext(CollectionFilterStateContext);\n\n    useEffect(() => {\n        return router.beforePushSubscribe((cb) => {\n            page.scrollToTopWithCallback(cb);\n            return true;\n        });\n    },[]);\n\n    useEffect(() => {\n        if (gridFrameRef.current) {            \n            const newGridColumns = (() => \n            {\n                if ((typeof gridHorizontalCellSpacing===\"object\") && (typeof gridHorizontalCellSpacing.fraction===\"number\"))\n                {\n                    const f = gridHorizontalCellSpacing.fraction;\n                    const t = targetCellWidth;\n                    const c = gridFrameRef.current.clientWidth;\n                    return Math.max(1,Math.round((c/t+f)/(1+f)));\n                }\n                else if (typeof gridHorizontalCellSpacing===\"number\")\n                {\n                    return Math.max(1,Math.round((gridFrameRef.current.clientWidth+gridHorizontalCellSpacing)/(targetCellWidth+gridHorizontalCellSpacing)));\n                }\n                else\n                {\n                    return 3;\n                }\n            })();\n            if (newGridColumns!==permGridColumns.current)\n            {\n                setGridColumns(newGridColumns);\n                setTimeout(() => \n                {\n                    setGridProcessCounter(permGridProcessCounter.current+1);\n                },0);\n            }            \n        }                        \n    },[`${windowSize.width},${windowSize.height}`,gridFrameRef.current]);\n\n    const [centerControlsInSlider,setCenterControlsInSlider] = useState(windowSize.height>=filterBarControlsHeight.value);\n    const [sliderOpen,setSliderOpen] = useState(false);    \n\n    useEffect(() => \n    {\n        setCenterControlsInSlider(windowSize.height>=filterBarControlsHeight.value);\n    },[`${windowSize.width},${windowSize.height}`,filterBarControlsHeight.value]);\n\n    const timerHandlerRef = useRef(0);    \n    const [cancelControlsPointerEvents,setCancelControlsPointerEvents] = useState(false);\n\n    useEffect(() => \n    {\n        (window as any).libSearch = libSearch;\n        const { current: filterBarBackElem } = filterBarBackRef;\n        if (filterBarBackElem)\n        {\n            const handler = (event: WheelEvent) => \n            {\n                if ((event.target instanceof HTMLElement) && (((event.target as HTMLElement).classList.contains(filterBarItemClassNameIdentifier)) || (event.target as HTMLElement).classList.contains(\"filter-bar-back\")))\n                {\n                    setCancelControlsPointerEvents(true);\n                    clearTimeout(timerHandlerRef.current);\n                    timerHandlerRef.current = setTimeout(() => \n                    {\n                        setCancelControlsPointerEvents(false);\n                    },100) as unknown as number;\n                }                                \n            };\n            document.addEventListener(\"wheel\",handler);\n            return () => document.removeEventListener(\"wheel\",handler);\n        }\n    },[]);\n    \n    const [showFilterBarInline,setShowFilterBarInline] = useState(false);\n\n    useEffect(() => {\n        const handlerBeforeRouterScrollUp = () => \n        {\n            setShowFilterBarInline(true);\n        };\n        const handlerAfterRouterScrollUp = () => \n        {\n            setShowFilterBarInline(false);\n        };\n\n        page.on(\"before-router-scroll-up\",handlerBeforeRouterScrollUp);\n        page.on(\"after-router-scroll-up\",handlerAfterRouterScrollUp);\n\n        return () => \n        {\n            page.off(\"before-router-scroll-up\",handlerBeforeRouterScrollUp);\n            page.off(\"after-router-scroll-up\",handlerAfterRouterScrollUp);    \n        };\n    },[]);    \n\n    console.log({id});\n    \n    const collectionItem = prebuildData.getCollectionByHandle(id);    \n    const collectionItems = prebuildData.getCollectionItems({omitSupport: true});\n    const collectionUrl = useCachedValue(() => collectionItem.route.split(\"{handle}\").join(id),id);\n    const reviewsHeader = consumeAllReviewsHeader();\n\n    const refOnGridResize = useResizeObserver(({height}) =>\n    {\n        collectionGridHeight.set(height);\n    });\n\n    let products = collectionItem.products.filter(({hidden}) => !hidden);    \n\n    if (Object.keys(filter.value).length>0) {\n        products = products.filter(({filters}) => {\n            return (Object.keys(filters).filter((key) => filter.value[key]).length>0);\n        });\n    }\n\n    if (sortOrder.value===\"reviewed\") {\n        products.sort(({id: aid},{id: bid}) => {\n            if (!reviewsHeader) return 0;\n            const a = reviewsHeader.products[aid]?.starRating || 0;\n            const b = reviewsHeader.products[bid]?.starRating || 0;\n            if (a<b) return 1;\n            if (a>b) return -1;\n            return 0;\n        });\n    }\n    else if (sortOrder.value===\"newest\") {\n        products.sort(({publishedAt: a},{publishedAt: b}) => \n        {\n            if (a<b) return 1;\n            if (a>b) return -1;\n            return 0;\n        });\n    }\n\n    useEffect(() => {\n        setFilterBarOpen(false);\n        filter.set({});\n    },[id]);\n\n    const gridReadyHandler = () => {\n        if (isSwitching.value)\n        {\n            setTimeout(() => \n            {\n                isSwitching.set(false);\n                routerTransition.stop();\n                const futureScrollMax = (navbarHeight.value+bannerHeight.value+Math.max(collectionGridHeight.value,filterBarControlsHeight.value))-page.clientHeight();\n                const targetScrollTop = Math.min(navbarHeight.value+bannerHeight.value-(miniNavbarHeight.value),futureScrollMax);\n                if (page.scrollTopMax()<targetScrollTop) page.unlockScroll();\n                if (page.scrollTop()>targetScrollTop) \n                {\n                    page.scrollToTopWithCallback(() => {\n                        page.unlockScroll();\n                    });\n                    // page.animateScrollTopManaged(targetScrollTop,{},() => \n                    // {\n                    //     page.unlockScroll();\n                    // });\n                }\n                else\n                {\n                    page.unlockScroll();\n                }                \n            },0);    \n        }\n    };\n\n    const backClickHandler = () => \n    {\n        setSliderOpen(false);\n    };\n\n    const openFilterControlsClickHandler = () => \n    {\n        setSliderOpen(true);\n    };\n\n    const [collectionDropdownMenuOpen,setCollectionDropdownMenuOpen] = useState(false);\n\n    const collectionDropdownClickHandler = () => \n    {\n        setCollectionDropdownMenuOpen(true);\n        page.hideOverlayScrollbar();\n    };\n\n    const collectionDropdownCloseClickHandler = () => \n    {\n        setCollectionDropdownMenuOpen(false);\n        page.showOverlayScrollbar();\n    };    \n\n    const [dropdownMenuHeight,setDropdownMenuHeight] = useState(0);\n    const [isDropdownMenuCentered,setIsDropdownMenuCentered] = useState(false);\n\n    const refDropdownMenuOnResize = useResizeObserver(({height}) =>\n    {\n        setDropdownMenuHeight(height);\n    });\n\n    useEffect(() => \n    {\n        setIsDropdownMenuCentered(dropdownMenuHeight<=windowSize.height);\n    },[windowSize.height,dropdownMenuHeight]);\n\n    const collectionDropdownItemClickHandler = (handle: string) => \n    {\n        setCollectionDropdownMenuOpen(false);\n        page.showOverlayScrollbar();\n        setTimeout(() => \n        {\n            const collectionItem = prebuildData.getCollectionByHandle(handle);\n            if (collectionItem)\n            {\n                const route = collectionItem.route.split(\"{handle}\").join(handle);\n                router.push(route);\n            }            \n        },100);\n    };\n\n    useLayoutEffect(() => \n    {\n        if (refreshSwitch.value===1) \n        {\n            setTimeout(() => \n            {\n                refreshSwitch.set(2);\n            },100);            \n        }\n        else if (refreshSwitch.value===3) \n        {\n            setTimeout(() => \n            {\n                refreshSwitch.set(0);\n            },50);            \n        }\n    },[refreshSwitch.value]);\n\n    const { ref: scrollerRef,className: scrollerClassName,injectedStyles: scrollerInjectedStyles,styles: scrollerStyles } = useDesktopScrollbar();        \n\n    const openMobileSearchHandler = () => {        \n        page.scrollTo({\n            top: scaleRemToPixel(148),\n            behavior: \"smooth\"\n        });\n        collectionSearchBarOpen.value = true;\n        openSearch(\"collection\",collectionItem.id.toString());\n    };\n\n    const { collectionBanner: { titleColor,subtitleColor },collectionFilterControls: { backgroundColor: collectionFilterControlsBackgroundColor } } = prebuildData.getActiveTheme()\n    \n    if (!reviewsHeader) return <div style={{height: \"600rem\",marginTop: \"50rem\"}}><CenteredSpinner /></div>\n\n    return (\n        <>\n            <Head>\n                {getInjectableHeaderTags(collectionItem?.seo.title,collectionItem?.seo.description,collectionUrl)}\n            </Head>\n            <div className={\"container\"\n                +(isMobile.current?\" mobile-state\":\"\")\n                +(centerControlsInSlider?\" center-controls-in-slider\":\"\")\n                +(sliderOpen?\" slider-open\":\"\")\n                +(collectionDropdownMenuOpen?\" collection-dropdown-menu-open\":\"\")\n                +(isDropdownMenuCentered?\" dropdown-menu-centered\":\"\")\n                }>                    \n                <div className=\"banner-frame\" style={{height: `${(configuredBannerHeight.height!==-1)?configuredBannerHeight.height:270}rem`}}>\n                    <Banner                    \n                        key={id}\n                        src={prebuildData.bustCache(collectionItem?.bannerImageUrl)}\n                        aspectRatio={collectionItem?.banner?.image?.ratio?(collectionItem?.banner?.image?.ratio.width/collectionItem?.banner?.image?.ratio.height):586/514} \n                        height={(configuredBannerHeight.height!==-1)?configuredBannerHeight.height:270} \n                        texts={[\n                            {\n                                color: titleColor,\n                                family: \"Open Sans\",\n                                left: (screenRatio>2.1)?-0.2:collectionItem?.banner?.captionLeft,\n                                top: 24,\n                                size: 25,\n                                weight: 500,\n                                text: collectionItem?.caption,\n                                paddingLeft: 50,\n                                paddingRight: 50,\n                                letterSpacing: 0.01951\n                            },{\n                                color: subtitleColor,\n                                family: \"Open Sans\",\n                                left: (screenRatio>2.1)?1:collectionItem?.banner?.subCaptionLeft,\n                                top: 58,\n                                size: 15,\n                                weight: 500,\n                                text: collectionItem?.subCaption,\n                                letterSpacing: 0.0325\n                            }\n                        ]}\n                        layout={TBannerLayout.Left}\n                        onImageShowing={() => setFilterBarOpen(true)}\n                        onHeightReady={() => setBannerHeightReady(true)}\n                        onResize={({height}) => \n                        {\n                            bannerHeight.set(height);\n                        }}\n                    />\n                </div>\n                <div className=\"search-bar-wrapper\">\n                    <CollectionSearchBar collectionId={collectionItem.id.toString()} collectionCaption={collectionItem.caption} />\n                </div>\n                <div className=\"mobile-collection-top-bar\">                    \n                    <CollectionNavBar \n                        leftIconName=\"collection-filter-open\"\n                        rightIconName=\"navbar-search\"\n                        leftIconClickHandler={openFilterControlsClickHandler}\n                        rightIconClickHandler={openMobileSearchHandler}\n                        collectionItem={collectionItem}\n                        collectionItems={collectionItems}\n                    />\n                </div>\n                <div className=\"under-banner-spacer\"></div>\n                <div className=\"frame\">\n                    {isMobile.current?(\n                        <>\n                            <div className=\"controls-slider-back\">\n                                <EventPane onClick={backClickHandler} />\n                            </div>\n                            <div className=\"collection-dropdown-menu\">                            \n                                <div className={`scroller ${scrollerClassName}`} ref={scrollerRef} style={scrollerStyles} >\n                                    <div ref={refDropdownMenuOnResize} className=\"menu\">\n                                        {collectionItems.map(({handle,caption},index) => (\n                                            <div key={handle} className={\"item\"+((handle===id)?\" selected\":\"\")}>\n                                                {caption}\n                                                <EventPane onClick={() => collectionDropdownItemClickHandler(handle)} />\n                                            </div>))}\n                                    </div>\n                                </div>\n                                <div className=\"close-button\">\n                                    <Icon name=\"navbar-cross\" size={20} />\n                                    <EventPane onClick={collectionDropdownCloseClickHandler} />\n                                </div>\n                            </div>\n                        </>\n                    ):null}                    \n                    <div ref={filterBarBackRef} className=\"filter-bar-back\" style={{opacity: bannerHeightReady?1:0}}>\n                        <FilterBar showInline={showFilterBarInline || isMobile.current} cancelControlsPointerEvents={cancelControlsPointerEvents} width={filterBarWidth} open={filterBarOpen} bannerHeightReady={bannerHeightReady} />\n                    </div>\n                    <div className=\"on-resize-frame-wrapper\">\n                        <div ref={refOnGridResize} className=\"on-resize-frame\">\n                            <div key={`${id}-${refreshSwitch.value}`} ref={gridFrameRef} className=\"grid-frame\">\n                                {((refreshSwitch.value===0) || (refreshSwitch.value===2))?(<>\n                                    <Grid \n                                        onReady={gridReadyHandler}\n                                        processCounter={gridProcessCounter} \n                                        columns={gridColumns} \n                                        verticalCellSpacing={gridVerticalCellSpacing}\n                                        horizontalCellSpacing={gridHorizontalCellSpacing}\n                                        scrollAnimation \n                                        scrollAnimationThreshold={0.3}\n                                        singleTopMargin={0}>\n                                        {products.map((product,index) => {                                                                    \n                                            const { caption,smallImages } = product;\n                                            const productId = product.id.toString();\n                                            const price = prebuildData.getProductPrice(productId,true);                                            \n                                            const discountedPrice = prebuildData.getProductPageDiscountedPrice(productId,price).price;\n                                            const teaseCaption = ((product.visibility===\"tease\") && (product.teaseCaption))?product.teaseCaption:undefined;\n                                            return <CollectionsGridItem \n                                                key={product.id} \n                                                productId={product.id.toString()} \n                                                caption={caption} \n                                                price={price} \n                                                discountedPrice={discountedPrice} \n                                                imageSrc={prebuildData.bustCache(smallImages[0].src)} \n                                                hoverImageSrc={(smallImages.length>1)?prebuildData.bustCache(smallImages[1].src):undefined} \n                                                teaseCaption={teaseCaption}\n                                            />;                                            \n                                        })}\n                                    </Grid>\n                                    {products.length===0?(\n                                        <CollectionsGridNoItems />\n                                    ):null}                                \n                                </>):null}\n                            </div>                        \n                        </div>\n                        <div className=\"scroll-bottom-padding\" style={{ height: (windowSize.width>1300)?scrollBottomPadding.value:0 }}></div>\n                    </div>\n                </div>\n            </div>                        \n            <style jsx>{scrollerInjectedStyles}</style>\n            <style jsx>{`\n            .container {\n                position: relative;\n            }\n\n            .search-bar-wrapper {\n                position: absolute;\n                right: 30rem;\n                top: 26rem;\n            }\n\n            .container.mobile-state {\n                --slider-duration: 0.25s;\n            }\n\n            .container.mobile-state .filter-bar-back {\n                position: fixed;\n                left: ${-filterBarWidth}rem;\n                top: 0rem;\n                width: ${filterBarWidth}rem;\n                height: 100%;\n                z-index: 103;\n                display: flex;\n                flex-direction: column;\n                justify-content: start;\n                overflow: auto;\n                transition: transform var(--slider-duration);\n            }\n\n            .container.mobile-state.slider-open .filter-bar-back {\n                transform: translateX(${filterBarWidth}rem);\n            }\n\n            .container.mobile-state.center-controls-in-slider .filter-bar-back {\n                justify-content: center;\n                overflow: hidden;\n            }\n\n            .container.mobile-state .controls-slider-back {\n                position: fixed;\n                left: 0rem;\n                top: 0rem;\n                width: 100%;\n                height: 100%;\n                background-color: rgba(0,0,0,0.5);\n                opacity: 0;\n                visibility: hidden;\n                z-index: 102;\n                transition: visibility var(--slider-duration),opacity var(--slider-duration),background-color 0.25s;\n            }\n\n            .container.mobile-state .collection-dropdown-menu {\n                position: fixed;\n                left: 0rem;\n                top: 0rem;\n                width: 100%;\n                height: 100%;\n                background-color: var(--color-collection-menu);\n                z-index: 104;\n                opacity: 0;\n                visibility: hidden;\n                transform: translateY(150rem);\n                --duration: 0.25s;\n                transition: opacity var(--duration),visibility var(--duration),transform var(--duration);\n            }\n\n            .container.mobile-state.collection-dropdown-menu-open .collection-dropdown-menu {\n                opacity: 1;\n                visibility: visible;\n                transform: translateY(0rem);\n            }\n\n            .collection-dropdown-menu .scroller {\n                position: absolute;\n                left: 0rem;\n                top: 0rem;\n                width: 100%;\n                height: 100%;                \n                display: flex;\n                flex-direction: column;\n                justify-content: start;\n                overflow: auto;\n            }\n\n            .container.dropdown-menu-centered .collection-dropdown-menu .scroller {\n                justify-content: center;\n                overflow: hidden;\n            }\n\n            .collection-dropdown-menu .scroller .menu {\n                padding: 0rem 74rem;\n            }\n\n            .collection-dropdown-menu .scroller .item {\n                font-size: 20rem;\n                font-weight: 500;\n                text-align: center;\n                padding: 16rem 0rem;\n                color: #222;\n                position: relative;\n                --duration: 0.3s;\n                transition: background-color var(--duration),color var(--duration);\n            }\n\n            .collection-dropdown-menu .scroller .item.touchdown {\n                background-color: rgba(0,0,0,0.02);\n            }\n\n            .collection-dropdown-menu .scroller .item.hover {\n                color: #777;\n            }\n\n            .collection-dropdown-menu .scroller .item.selected.hover {\n                color: var(--color-light-blue);\n            }\n\n            .collection-dropdown-menu .scroller .item.selected {\n                color: var(--color-light-blue);\n                font-weight: 600;\n            }\n\n            .collection-dropdown-menu .close-button {\n                position: absolute;\n                right: 5rem;\n                top: 0rem;\n                color: #888;\n                padding: 20rem 25rem;\n                --duration: 0.3s;\n                transition: background-color var(--duration),color var(--duration);\n            }\n\n            .collection-dropdown-menu .close-button.touchdown {\n                background-color: rgba(0,0,0,0.06);\n            }\n\n            .collection-dropdown-menu .close-button.hover {\n                color: #adadad;                \n            }\n\n            .container.mobile-state.slider-open .controls-slider-back {\n                opacity: 1;\n                visibility: visible;\n            }\n\n            .container.mobile-state.slider-open .controls-slider-back.touchdown {\n                background-color: rgba(0,0,0,0.6);\n            }\n\n            .on-resize-frame {\n                width: 100%;\n            }\n\n            .on-resize-frame-wrapper {\n                width: 100%;\n            }\n\n            .frame {\n                display: flex;\n                flex-direction: row;                \n            }\n\n            .filter-bar-back {\n                flex: 0 0 ${filterBarWidth}rem;\n                background-color: ${collectionFilterControlsBackgroundColor};\n                display: table-cell;\n                position: relative;\n                min-height: 900rem;\n            }\n\n            .container.mobile-state .filter-bar-back {\n                position: fixed;\n            }\n\n            .under-banner-spacer {\n                height: 0rem;\n            }\n\n            .grid-frame {\n                padding: 45rem;\n                flex-grow: 1;\n            }\n\n            .container.mobile-state .grid-frame {\n                padding-top: 0rem;\n            }\n\n            .collection-top-bar {\n                display: none;\n                /* padding: 25rem 45rem; */\n                padding-left: 20rem;\n                padding-right: 25rem;\n                padding-top: 20rem;\n                padding-bottom: 20rem;\n                flex-direction: row;\n                align-items: center;\n            }\n\n            .filter-open-button {\n                padding: 5rem 12rem;\n                position: relative;\n                transition: background-color 0.2s,color 0.3s;\n                color: #333;\n                /* background-color: blue; */\n            }\n\n            .filter-open-button.touchdown {\n                background-color: #eaeaea;\n            }\n\n\n            .filter-open-button.hover {\n                color: #999;\n            }\n\n            .mobile-collection-top-bar {\n                display: none;\n            }\n            \n            @media screen and (max-width: ${mobileCutoff}px) {\n                .banner-frame {\n                    display: none;\n                }\n\n                .collection-top-bar {\n                    display: flex;\n                }\n\n                .mobile-collection-top-bar {\n                    padding-left: 20rem;\n                    padding-right: 25rem;\n                    padding-top: 20rem;\n                    padding-bottom: 20rem;\n                    display: block;\n                }\n\n                .search-bar-wrapper {\n                    /* display: none; */\n                    --right: 32rem;\n                    top: 25rem;\n                    right: var(--right);\n                    width: calc(100% - (var(--right) * 2));\n                }\n\n                .filter-bar-back {\n                    min-height: 0rem;\n                }\n            }     \n            `}</style>\n        </>\n    );\n}","export default function _instanceof(left, right) {\n  if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n    return !!right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n}"],"names":["window","__NEXT_P","push","FilterBarIconButton","name","selected","onClick","paneClassNames","hint","prebuildData","collectionFilterControls","highlightColor","hoverColor","color","div","i","EventPane","FilterBarTextButton","text","disabled","backgroundColor","split","map","line","index","React","br","FilterBar","width","bannerHeightReady","open","cancelControlsPointerEvents","showInline","sortOrderCaptions","useContext","CollectionFilterStateContext","sortOrder","filter","isSwitching","useState","filterValue","setFilterValue","filterValueRef","useRef","current","sortOrderValue","setSortOrderValue","sendFilterTimeoutRef","sendSortOrderTimeoutRef","useEffect","clearTimeout","setTimeout","set","keys","value","length","Object","selectedFilterIdRef","controlsTop","setControlsTop","_showControls","setShowControls","showControls","LayoutStateContext","page","misc","filterBarItemClassNameIdentifier","mobileDetect","isActive","widthCutoff","_windowSize","WindowSizeContext","permRef","windowSize","DimensionsStateContext","navbarHeight","bannerHeight","miniNavbarHeight","collectionGridHeight","filterBarControlsHeight","scrollBottomPadding","updateTop","controlsHeight","scrollTop","height","topSectionHeight","maxAvailableSpace","windowHeight","availableSpace","Math","min","max","stickyPosition","hideControls","useSmartState","addScrollEventListener","refOnResize","useResizeObserver","isScrollLocked","style","transform","mobileCutoff","ref","isMobile","top","pointerEvents","join","id","updatedSelectedFilterId","handlerFilterIconClicked","NicotineWarning","cssStateManager","useCssStateManager","nicotineWarningBox","borderColor","textColor","getClassNames","PriceDisplayWithDiscount","size","price","discountedPrice","span","PriceDisplay","strike","CollectionsGridItem","caption","imageSrc","hoverImageSrc","productId","teaseCaption","useProperty","layout","router","useCustomRouter","consumeReviewsHeader","reviewsCount","starRating","reviewText","round","stars","Array","from","priceStr","cutOffIndex","priceDollars","parseInt","substring","toString","priceCents","showImage","setShowImage","productPageRoute","useCachedValue","collectionItem","priceColor","titleColor","priceHoverColor","titleHoverColor","reviewCountColor","reviewCountHoverColor","general","starsColor","starsHoverColor","Image","src","onLoadingComplete","type","seoLinkUrl","TransitionFadeIn","durationSecs","children","show","setShow","transition","CollectionsGridNoItems","CollectionSearchBar","collectionId","collectionCaption","searchOpen","openSearch","searchBarCommRef","miniWidthCutoff","collectionSearchBarOpen","placeholderRef","onTransitionEnd","e","elem","target","propertyName","searchBarComm","notifyMeOnPlaceholderAnimationEnd","Collection","useRouter","query","lastIsMobileRef","scrollTo","behavior","CollectionContent","filterBarWidth","filterBarOpen","setFilterBarOpen","setBannerHeightReady","screenRatio","configuredBannerHeight","scaleRemToPixel","gridFrameRef","gridHorizontalCellSpacing","fraction","gridColumns","setGridColumns","permGridColumns","gridProcessCounter","setGridProcessCounter","permGridProcessCounter","filterBarBackRef","refreshSwitch","beforePushSubscribe","cb","scrollToTopWithCallback","newGridColumns","f","c","clientWidth","centerControlsInSlider","setCenterControlsInSlider","sliderOpen","setSliderOpen","timerHandlerRef","setCancelControlsPointerEvents","libSearch","handler","event","HTMLElement","classList","contains","document","addEventListener","removeEventListener","showFilterBarInline","setShowFilterBarInline","handlerBeforeRouterScrollUp","handlerAfterRouterScrollUp","on","off","console","log","collectionItems","omitSupport","collectionUrl","route","reviewsHeader","consumeAllReviewsHeader","refOnGridResize","products","hidden","filters","key","sort","a","aid","b","bid","publishedAt","collectionDropdownMenuOpen","setCollectionDropdownMenuOpen","dropdownMenuHeight","setDropdownMenuHeight","isDropdownMenuCentered","setIsDropdownMenuCentered","refDropdownMenuOnResize","useLayoutEffect","useDesktopScrollbar","className","injectedStyles","styles","collectionBanner","subtitleColor","Head","getInjectableHeaderTags","seo","title","description","scrollerInjectedStyles","collectionFilterControlsBackgroundColor","Banner","bannerImageUrl","aspectRatio","banner","image","ratio","texts","family","left","captionLeft","weight","paddingLeft","paddingRight","letterSpacing","subCaptionLeft","subCaption","TBannerLayout","onImageShowing","onHeightReady","onResize","CollectionNavBar","leftIconName","rightIconName","leftIconClickHandler","rightIconClickHandler","scrollerRef","scrollerStyles","scrollerClassName","handle","showOverlayScrollbar","collectionDropdownItemClickHandler","Icon","opacity","Grid","onReady","routerTransition","futureScrollMax","clientHeight","targetScrollTop","scrollTopMax","unlockScroll","processCounter","columns","verticalCellSpacing","horizontalCellSpacing","scrollAnimation","scrollAnimationThreshold","singleTopMargin","product","smallImages","visibility","undefined","marginTop","CenteredSpinner","_instanceof","right","Symbol","hasInstance"],"sourceRoot":""}